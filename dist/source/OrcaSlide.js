"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_Utils2=require("./Utils"),_Utils3=_interopRequireDefault(_Utils2);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&("object"==typeof b||"function"==typeof b)?b:a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var OrcaSlide=function(a){function b(){return _classCallCheck(this,b),_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}var c=Math.ceil;return _inherits(b,a),_createClass(b,null,[{key:"animateSlide",value:function(){var a=this,b=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],c=this.configSlide,d=c.active,e=c.itemWidth,f=c.moveTo,g=c.time,h=b?f:-f;if(d){this.configSlide.position+=b?1:-1,this.configSlide.active=!1;var i=0,j=setInterval(function(){if(a.moveToScroll(h),i+=f,i>=e){clearInterval(j);var b=e*a.configSlide.position;a.moveToScroll(b,!1),a.configSlide.active=!0}},g)}}},{key:"displayArrow",value:function(a){var b=this.configSlide,c=b.arrowNext,d=b.arrowPrevious,e=b.items,f=0<a?"":"none",g=e===a?"none":"";this.displayToggle(c,g),this.displayToggle(d,f)}},{key:"startTouch",value:function(){var a=this,b=this.isMobile,c=this.configSlide,d=c.contentItem,e=c.items;if("desktop"!==b){var f=0;d.addEventListener("touchstart",function(a){var b=a.changedTouches[0];f=parseInt(b.clientX,10)}),d.addEventListener("touchmove",function(b){var c=b.changedTouches[0],d="",g=parseInt(c.clientX,10);d=0<g-f?"right":"left","left"===d&&a.configSlide.position<e?a.animateSlide(!0):"right"===d&&0<a.configSlide.position&&a.animateSlide(!1)})}}},{key:"config",set:function(a){this.configSlide={arrowNext:"",arrowPrevious:"",contentItem:"",time:1,isInfinite:!1,position:0,active:!1},Object.assign(this.configSlide,a),this.validateConfig.setActionButton.resizeSlide.startTouch()}},{key:"isInfinite",set:function(a){var b=this.configSlide,c=b.isInfinite,d=b.items,e=b.itemWidth,f=(0>a||a>d)&&a;if(c){if(0>a||a>d){var g=0>f?d*e:0;this.moveToScroll(g,!1),this.configSlide.position=0>f?d:0,this.configSlide.active=!0}}else this.displayArrow(a)}},{key:"resizeSlide",get:function(){var a=this,b=this.configSlide,d=this.existFields(b,"item",null),e=this.existFields(b,"content",null);return null!==d&&null!==e&&window.addEventListener("resize",function(){a.configSlide.scrollWidth=e.scrollWidth,a.configSlide.moveTo=c(d.offsetWidth/256),a.configSlide.itemWidth=d.offsetWidth;var b=d.offsetWidth*a.configSlide.position;a.moveToScroll(b,!1)}),this}},{key:"setActionButton",get:function(){var a=this;return["arrowNext","arrowPrevious"].forEach(function(b){var c="arrowNext"===b,d=a.configSlide[b];d.addEventListener("click",function(){var b=a.configSlide.items,d=a.configSlide.position;d+=c?1:-1,0<=d&&d<=b?(a.animateSlide(c),a.isInfinite=d):(b<d||0>d)&&(a.isInfinite=d)})}),this}},{key:"validateConfig",get:function(){var a=this;return["arrowNext","arrowPrevious","contentItem"].forEach(function(b){var d=a.configSlide[b],e=document.querySelector(d);if(e&&(a.configSlide[b]=e,"contentItem"===b)){var f=e.children[0]||{},g=f.offsetWidth||0,h={items:e.children.length-1,itemWidth:g,moveTo:c(g/256),scrollWidth:e.scrollWidth||0,time:1e3*a.configSlide.time/512,item:f,content:e};a.configSlide.active=0<h.items&&0<h.moveTo,Object.assign(a.configSlide,h),a.configSlide.isInfinite||a.displayToggle(a.configSlide.arrowPrevious,"none")}}),this}}]),b}(_Utils3.default);exports.default=OrcaSlide;